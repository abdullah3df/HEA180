<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>HE Beam Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
<div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg">
    <h1 class="text-2xl font-bold mb-4">HEA / HEB / HEM Rechner</h1>

    <label class="block mb-2">Typ & Größe:</label>
    <select id="beamType" class="border rounded p-2 w-full mb-4">
        <option value="">-- Wählen --</option>
        <option value="HEB 180">HEB 180</option>
        <option value="HEB 200">HEB 200</option>
        <option value="HEA 180">HEA 180</option>
        <option value="HEM 180">HEM 180</option>
    </select>

    <label class="block mb-2">Breite b (mm):</label>
    <input type="number" id="bInput" class="border rounded p-2 w-full mb-4" placeholder="z.B. 180">

    <label class="block mb-2">Stegdicke t_w (mm):</label>
    <input type="number" id="twInput" class="border rounded p-2 w-full mb-4" placeholder="z.B. 8.5">

    <label class="block mb-2">Winkel (°):</label>
    <input type="number" id="angleInput" class="border rounded p-2 w-full mb-4" placeholder="z.B. 16">

    <button onclick="calculate()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Berechnen</button>
    <button onclick="learnSize()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 ml-2">🧠 Lernen</button>

    <div id="result" class="mt-6 bg-gray-50 p-4 rounded-lg"></div>
</div>

<script>
// قاعدة بيانات افتراضية
const beamData = {
    "HEB 180": { b: 180, t_w: 8.5 },
    "HEB 200": { b: 200, t_w: 9.0 },
    "HEA 180": { b: 180, t_w: 7.5 },
    "HEM 180": { b: 180, t_w: 10.0 }
};

// تحميل القيم من LocalStorage إذا موجودة
document.getElementById("beamType").addEventListener("change", function() {
    const type = this.value;
    let stored = localStorage.getItem("beamData_" + type);
    if (stored) {
        let data = JSON.parse(stored);
        document.getElementById("bInput").value = data.b;
        document.getElementById("twInput").value = data.t_w;
    } else if (beamData[type]) {
        document.getElementById("bInput").value = beamData[type].b;
        document.getElementById("twInput").value = beamData[type].t_w;
    }
});

function calculate() {
    let b = parseFloat(document.getElementById("bInput").value);
    let t_w = parseFloat(document.getElementById("twInput").value);
    let angle = parseFloat(document.getElementById("angleInput").value);

    if (isNaN(b) || isNaN(t_w) || isNaN(angle)) {
        document.getElementById("result").innerHTML = "<p class='text-red-500'>Bitte alle Felder ausfüllen!</p>";
        return;
    }

    let F = (b - t_w) / 2;
    let deltaS = F * Math.tan((angle / 2) * Math.PI / 180);
    let s_top = deltaS;
    let s_bottom = 0;
    let r_top = b - s_top;
    let r_bottom = b - s_bottom;

    document.getElementById("result").innerHTML = `
        <p><b>F:</b> ${F.toFixed(2)} mm</p>
        <p><b>Δs:</b> ${deltaS.toFixed(2)} mm</p>
        <p><b>Oberer Schnitt:</b> ${s_top.toFixed(2)} mm</p>
        <p><b>Unterer Schnitt:</b> ${s_bottom.toFixed(2)} mm</p>
        <p><b>Rest oben:</b> ${r_top.toFixed(2)} mm</p>
        <p><b>Rest unten:</b> ${r_bottom.toFixed(2)} mm</p>
    `;
}

function learnSize() {
    const type = document.getElementById("beamType").value;
    if (!type) {
        alert("Bitte Typ auswählen!");
        return;
    }
    let b = parseFloat(document.getElementById("bInput").value);
    let t_w = parseFloat(document.getElementById("twInput").value);
    if (isNaN(b) || isNaN(t_w)) {
        alert("Bitte gültige Werte eingeben!");
        return;
    }
    localStorage.setItem("beamData_" + type, JSON.stringify({ b, t_w }));
    alert("Gespeichert! (" + type + ")");
}
</script>
</body>
</html>
