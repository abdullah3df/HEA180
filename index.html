import { useState } from "react";

export default function App() {
  const profileTypes = ["HEA", "HEB", "HEM"];
  const profileSizes = [
    "100", "120", "140", "160", "180", "200", "220",
    "240", "260", "280", "300"
  ];

  // بيانات المقاطع (عرض الجناح b بالملم)
  const profiles = {
    HEA100: { b: 100 }, HEA120: { b: 120 }, HEA140: { b: 140 }, HEA160: { b: 160 },
    HEA180: { b: 180 }, HEA200: { b: 200 }, HEA220: { b: 220 }, HEA240: { b: 240 },
    HEA260: { b: 260 }, HEA280: { b: 280 }, HEA300: { b: 300 },

    HEB100: { b: 100 }, HEB120: { b: 120 }, HEB140: { b: 140 }, HEB160: { b: 160 },
    HEB180: { b: 180 }, HEB200: { b: 200 }, HEB220: { b: 220 }, HEB240: { b: 240 },
    HEB260: { b: 260 }, HEB280: { b: 280 }, HEB300: { b: 300 },

    HEM100: { b: 106 }, HEM120: { b: 126 }, HEM140: { b: 146 }, HEM160: { b: 166 },
    HEM180: { b: 186 }, HEM200: { b: 206 }, HEM220: { b: 226 }, HEM240: { b: 248 },
    HEM260: { b: 268 }, HEM280: { b: 288 }, HEM300: { b: 310 }
  };

  const [profileType, setProfileType] = useState("HEA");
  const [profileSize, setProfileSize] = useState("180");
  const [jointAngle, setJointAngle] = useState(30);
  const [cutWidth, setCutWidth] = useState(null);

  const calculateCut = () => {
    const key = `${profileType}${profileSize}`;
    const profile = profiles[key];

    if (!profile) return;

    const wingWidth = profile.b;
    const angleRad = (jointAngle / 2) * (Math.PI / 180); // نصف الزاوية بالراديان
    const cut = (wingWidth - wingWidth * Math.cos(angleRad)); // معادلة القص
    setCutWidth(cut.toFixed(2));
  };

  return (
    <div className="min-h-screen bg-gray-100 p-6 font-sans">
      <div className="max-w-lg mx-auto bg-white p-6 rounded-lg shadow-lg">
        <h1 className="text-2xl font-bold mb-6 text-center">
          حاسبة قص جناح الحديد للحصول على زاوية تجميع
        </h1>

        {/* اختيار نوع المقطع */}
        <div className="mb-4">
          <label className="block mb-1 font-semibold">نوع المقطع:</label>
          <select
            value={profileType}
            onChange={(e) => setProfileType(e.target.value)}
            className="w-full p-2 border rounded"
          >
            {profileTypes.map((type) => (
              <option key={type} value={type}>{type}</option>
            ))}
          </select>
        </div>

        {/* اختيار المقاس */}
        <div className="mb-4">
          <label className="block mb-1 font-semibold">المقاس:</label>
          <select
            value={profileSize}
            onChange={(e) => setProfileSize(e.target.value)}
            className="w-full p-2 border rounded"
          >
            {profileSizes.map((size) => (
              <option key={size} value={size}>{size}</option>
            ))}
          </select>
        </div>

        {/* زاوية التجميع */}
        <div className="mb-4">
          <label className="block mb-1 font-semibold">زاوية التجميع المطلوبة (°):</label>
          <input
            type="number"
            min="5"
            max="60"
            value={jointAngle}
            onChange={(e) => setJointAngle(parseFloat(e.target.value))}
            className="w-full p-2 border rounded"
          />
        </div>

        {/* زر الحساب */}
        <button
          onClick={calculateCut}
          className="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700"
        >
          احسب القص المطلوب
        </button>

        {/* النتيجة */}
        {cutWidth !== null && (
          <div className="mt-6 p-4 bg-green-50 border border-green-300 rounded">
            <p className="font-bold">يجب قطع: {cutWidth} مم من الجناح العلوي لكل قطعة</p>
          </div>
        )}

        {/* رسم توضيحي */}
        {cutWidth !== null && (
          <div className="mt-6 flex justify-center">
            <svg width="300" height="100" viewBox="0 0 300 100">
              {/* الجناح الكامل */}
              <rect x="10" y="30" width={profiles[`${profileType}${profileSize}`].b} height="20" fill="#cbd5e1" />
              {/* الجزء المقطوع */}
              <rect x="10" y="30" width={cutWidth} height="20" fill="#ef4444" />
              <text x="10" y="25" fontSize="12" fill="black">قص {cutWidth} مم</text>
            </svg>
          </div>
        )}
      </div>
    </div>
  );
}
